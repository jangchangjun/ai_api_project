<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        .searchContainer {
            display: flex;
            gap: 10px;
        }

        .searchInput {
            width: 200px;
            padding: 5px;
        }

        .searchButton {
            padding: 5px;
            cursor: pointer;
        }

        .searchResults {
            list-style-type: none;
            padding: 0;
            margin: 0;
        }

        .searchResults li {
            cursor: pointer;
            padding: 5px;
            border: 1px solid #ddd;
            margin-bottom: -1px;
            background-color: #f6f6f6;
        }
    </style>
    <title>Spotify Search Example</title>
</head>
<body>

    <div class="searchContainer">
        <input type="text" id="trackSearchInput" class="searchInput" placeholder="Search for tracks...">
        <button id="trackSearchButton" class="searchButton">Search Tracks</button>
    </div>
    <ul id="trackResults" class="searchResults"></ul>

    <div class="searchContainer">
        <input type="text" id="artistSearchInput" class="searchInput" placeholder="Search for artists...">
        <button id="artistSearchButton" class="searchButton">Search Artists</button>
    </div>
    <ul id="artistResults" class="searchResults"></ul>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            function searchSpotify(query, type) {
                return fetch(`https://api.spotify.com/v1/search?q=${query}&type=${type}`, {
                    method: 'GET',
                    headers: {
                        'Authorization': 'Bearer BQCfWHDjBedHz9CtOKZaWNsPHmYZ7iX_fOJ6zFxhGEvQWJWPVVS-tFhQSaKUGypf-u8H5HhqiYyY3Elqw_n6xYMD1FUwMUY14TpcbIHU3XqjGmktdB4', // Replace with a valid access token
                        'Content-Type': 'application/json',
                        'Accept': 'application/json',
                    },
                })
                .then(response => response.json())
                .then(data => data[type + 's'].items)
                .catch(error => {
                    console.error(`Error fetching Spotify ${type} data:`, error);
                    return [];
                });
            }

            function updateResults(query, type, resultsContainer) {
                // Clear previous results
                resultsContainer.innerHTML = '';

                // Perform Spotify search
                searchSpotify(query, type)
                    .then(results => {
                        // Populate the results list
                        results.forEach(result => {
                            const listItem = document.createElement('li');
                            listItem.textContent = result.name;

                            // Add a click event listener to handle result selection
                            listItem.addEventListener('click', function () {
                                // Save the selected result (you can modify this part to save it wherever you need)
                                localStorage.setItem('selectedResult', result.name);
                                // Hide the results
                                resultsContainer.innerHTML = '';
                            });

                            resultsContainer.appendChild(listItem);
                        });
                    });
            }

            // Track search
            const trackSearchInput = document.getElementById('trackSearchInput');
            const trackSearchButton = document.getElementById('trackSearchButton');
            const trackResults = document.getElementById('trackResults');

            trackSearchButton.addEventListener('click', function () {
                const query = trackSearchInput.value;
                updateResults(query, 'track', trackResults);
            });

            // Artist search
            const artistSearchInput = document.getElementById('artistSearchInput');
            const artistSearchButton = document.getElementById('artistSearchButton');
            const artistResults = document.getElementById('artistResults');

            artistSearchButton.addEventListener('click', function () {
                const query = artistSearchInput.value;
                updateResults(query, 'artist', artistResults);
            });
        });
    </script>
</body>
</html> -->

<!DOCTYPE html>
<!-- Created By CodingNepal -->
<html lang="en" dir="ltr">
   <head>
      <meta charset="utf-8">
      <title>Multi Step Form | CodingNepal</title>
      <link rel="stylesheet" href="test.css">
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"/>
   </head>
   <body>
      <div class="container">
         <header>Music Explorer</header>
         <div class="progress-bar">
            <div class="step">
               <p>
                  artist,track
               </p>
               <div class="bullet">
                  <span>1</span>
               </div>
               <div class="check fas fa-check"></div>
            </div>
            <div class="step">
               <p>
                 details
               </p>
               <div class="bullet">
                  <span>2</span>
               </div>
               <div class="check fas fa-check"></div>
            </div>
            <div class="step">
               <p>
                 genre
               </p>
               <div class="bullet">
                  <span>3</span>
               </div>
               <div class="check fas fa-check"></div>
            </div>
            <div class="step">
               <p>
                  playlist
               </p>
               <div class="bullet">
                  <span>4</span>
               </div>
               <div class="check fas fa-check"></div>
            </div>
         </div>
         <div class="form-outer">
            <form action="#">
               <div class="page slide-page">
                  <div class="title">
                     Track and Artist
                  </div>
                  <div class="field">
                     <div class="label">
                        tracks
                     </div>
                     <input type="text" id="trackSearchInput" class="searchInput" placeholder="Search for tracks...">
                  </div>
                  <div class="field">
                     <div class="label">
                       artist
                     </div>
                     <input type="text" id="artistSearchInput" class="searchInput" placeholder="Search for artist...">
                  </div>
                  <ul id="artistResults" class="searchResults"></ul>   
                  <ul id="trackResults" class="searchResults"></ul>               
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            function searchSpotify(query, type) {
                return fetch(`https://api.spotify.com/v1/search?q=${query}&type=${type}`, {
                    method: 'GET',
                    headers: {
                        'Authorization': 'Bearer BQB9fGwoDNEFpPAl8u-yqq8oQf2kYnJh1_UHQKaQvr5zZ7wri3f1xwMe3IA4_pQRdO2y3pUsdvXooKyrsQYF25IOQb-41z69yd4ENjCIsTQQzSnXblw"', // Replace with a valid access token
                        'Content-Type': 'application/json',
                        'Accept': 'application/json',
                    },
                })
                .then(response => response.json())
                .then(data => data[type + 's'].items)
                .catch(error => {
                    console.error(`Error fetching Spotify ${type} data:`, error);
                    return [];
                });
            }

            function updateResults(query, type, resultsContainer) {
                // Clear previous results
                resultsContainer.innerHTML = '';

                // Perform Spotify search
                searchSpotify(query, type)
                    .then(results => {
                        // Populate the results list
                        results.forEach(result => {
                            const listItem = document.createElement('li');
                            listItem.textContent = result.name;

                            // Add a click event listener to handle result selection
                            listItem.addEventListener('click', function () {
                                // Save the selected result (you can modify this part to save it wherever you need)
                                localStorage.setItem('selectedResult', result.name);
                                // Fill the search input with the selected result
                                document.getElementById(type + 'SearchInput').value = result.name;
                                // Hide the results
                                resultsContainer.innerHTML = '';
                            });

                            resultsContainer.appendChild(listItem);
                        });
                    });
            }

            // Track search
            const trackSearchInput = document.getElementById('trackSearchInput');
            const trackResults = document.getElementById('trackResults');

            trackSearchInput.addEventListener('input', function () {
                const query = trackSearchInput.value;
                updateResults(query, 'track', trackResults);
            });

            // Artist search
            const artistSearchInput = document.getElementById('artistSearchInput');
            const artistResults = document.getElementById('artistResults');

            artistSearchInput.addEventListener('input', function () {
                const query = artistSearchInput.value;
                updateResults(query, 'artist', artistResults);
            });
        });
    </script>
                  <div class="field">
                     <button class="firstNext_next">Next</button>
                  </div>
               </div>
               <div class="page">
                  <div class="title">
                    Details
                  </div>
                  <h3>bpm값 입력(30~300)</h3>
                  <div class="bpm">
                    <div>
                        <input class="bpmnum" id="bpmmin" type="text" placeholder="bpm 최소치 입력">
                        <input class="bpmnum" id="bpmmax" type="text" placeholder="bpm 최대치 입력">
                    </div>
               
                <h3>에너지 값 입력(0~1)</h3>
                <div class="energy">
                    <div>
                        <input class="energynum" id="energymin" type="text" placeholder="에너지 최소치 입력 ex) 0.11">
                        <input class="energynum" id="energymax" type="text" placeholder="에너지 최대치 입력 ex) 0.89">
                    </div>
                </div>
                
                
                <div class="field btns">
                    <button class="prev-1 prev">Previous</button>
                    <button class="next-1 next" onclick="validateAndNext()">Next</button>
                </div>
            </div>
                <script>
                    function validateAndNext() {
                        // BPM 값 저장 및 체크
                        var bpmMinInput = document.getElementById('bpmmin');
                        var bpmMaxInput = document.getElementById('bpmmax');
                        var bpmMinValue = parseInt(bpmMinInput.value);
                        var bpmMaxValue = parseInt(bpmMaxInput.value);
                
                        if (isNaN(bpmMinValue) || isNaN(bpmMaxValue) || bpmMinValue < 30 || bpmMaxValue > 300 || bpmMinValue > bpmMaxValue) {
                            alert('BPM값을 다시 입력해주세요. 30~300값을 입력해야합니다');
                            return;
                        }

                        localStorage.setItem('bpmmin', bpmMinValue);
                        localStorage.setItem('bpmmax', bpmMaxValue);

                        alert('BPM값이 적용되었습니다! \n최소치: ' + bpmMinValue + '\n최대치: ' + bpmMaxValue);

                        
                
                        // Energy 값 저장 및 체크
                        var energyMinInput = document.getElementById('energymin');
                        var energyMaxInput = document.getElementById('energymax');
                        var energyMinValue = parseFloat(energyMinInput.value).toFixed(2);
                        var energyMaxValue = parseFloat(energyMaxInput.value).toFixed(2);
                
                        if (isNaN(energyMinValue) || isNaN(energyMaxValue) || energyMinValue < 0 || energyMaxValue > 1 || energyMinValue > energyMaxValue) {
                            alert('에너지값을 다시 입력해주세요. 0~1값을 입력해야합니다.');
                            return;
                        }
                        localStorage.setItem('energymin', energyMinValue);
                        localStorage.setItem('energymax', energyMaxValue);
                
                        alert('에너지값이 적용되었습니다! \n최소치: ' + energyMinValue + '\n최대치: ' + energyMaxValue);
                        
                        
                    }
                </script>
                
<!--                 
                <div class="field btns">
                    <button class="prev-1 prev">Previous</button>
                    <button class="next-1 next" >Next</button>
                </div> -->
                
                
                       
                    </div>             
               <div class="page">
                  <div class="title">
                    Genre
                  </div>
                  <style>
                    .checkbox-group {
                        display: flex;
                        flex-wrap: wrap;
                        margin-bottom: 10px;
                    }
                
                    .checkbox-group label {
                        flex-basis: 20%;
                        margin-bottom: 10px; /* 3개씩 나란히 표시하려면 100% / 3 = 33.33% */
                    }
                </style>
                
                <div class="field" id="genreField" class="checkbox-group">
                   
                </div>
                
                <script>
                   
                    document.addEventListener('DOMContentLoaded', function () {
                        var genres = ['k-pop', 'pop', 'j-pop', 'acoustic', 'indie', 'dance'];
                        var genreField = document.getElementById('genreField');
                
                        genres.forEach(function (genre) {
                            var checkbox = document.createElement('input');
                            checkbox.type = 'checkbox';
                            checkbox.name = 'genres'; 
                            checkbox.value = genre;
                            checkbox.id = genre + 'Checkbox';
                
                            var label = document.createElement('label');
                            label.htmlFor = genre + 'Checkbox';
                            label.appendChild(document.createTextNode(genre));
                
                            var checkboxWrapper = document.createElement('div');
                            checkboxWrapper.appendChild(checkbox);
                            checkboxWrapper.appendChild(label);
                            genreField.appendChild(checkboxWrapper);
                        });
                
                      
                        genreField.addEventListener('change', function () {
                            var checkedGenres = Array.from(genreField.querySelectorAll('input[type="checkbox"]:checked'))
                                .map(function (checkbox) {
                                    return checkbox.value;
                                });
                
                           
                            displaySelectedGenres(checkedGenres);
                        });
                        
                    });
                    function displaySelectedGenres(checkedGenres) {
                        const displayedGenres = document.getElementById('displayedGenres');
                        displayedGenres.textContent = checkedGenres.join(', ');
                
                        
                        localStorage.setItem('checkedGenres', JSON.stringify(checkedGenres));
                    }
                </script>
                
                
                  <div class="field btns">
                     <button class="prev-2 prev">Previous</button>
                     <button class="next-2 next">Next</button>
                  </div>
               </div>
            
               <div class="page">
                  <div class="title">
                    playlist
                  </div>
                  <div class="field">
                    <p>BPM min: <span id="displayedBpmMin"></span></p>
                    <p>BPM max: <span id="displayedBpmMax"></span></p>
                    <p>Energy min: <span id="displayedEnergyMin"></span></p>
                    <p>Energy max: <span id="displayedEnergyMax"></span></p>
                    <p>Genre: <span id="displayedGenres"></span></p>

               
                    <script>
                        document.addEventListener('DOMContentLoaded', function () {
                            // Always clear localStorage values on page load
                            localStorage.removeItem('bpmmin');
                            localStorage.removeItem('bpmmax');
                            localStorage.removeItem('energymin');
                            localStorage.removeItem('energymax');
                            localStorage.removeItem('checkedGenres');
                    
                            // Load and display values
                            document.getElementById('bpmmin').value = localStorage.getItem('bpmmin') || '';
                            document.getElementById('bpmmax').value = localStorage.getItem('bpmmax') || '';
                            document.getElementById('energymin').value = localStorage.getItem('energymin') || '';
                            document.getElementById('energymax').value = localStorage.getItem('energymax') || '';
                            const checkedGenres = JSON.parse(localStorage.getItem('checkedGenres')) || [];
                            checkedGenres.forEach(genre => {
                                document.getElementById(genre + 'Checkbox').checked = true;
                            });
                    
                            displayPlaylist();
                    
                            function displayPlaylist() {
                                const displayedBpmMin = document.getElementById('displayedBpmMin');
                                const displayedBpmMax = document.getElementById('displayedBpmMax');
                                const displayedEnergyMin = document.getElementById('displayedEnergyMin');
                                const displayedEnergyMax = document.getElementById('displayedEnergyMax');
                                const displayedGenres = document.getElementById('displayedGenres');
                    
                                const bpmMin = localStorage.getItem('bpmmin');
                                const bpmMax = localStorage.getItem('bpmmax');
                                const energyMin = localStorage.getItem('energymin');
                                const energyMax = localStorage.getItem('energymax');
                                const checkedGenres = JSON.parse(localStorage.getItem('checkedGenres')) || [];
                    
                                displayedBpmMin.textContent = bpmMin ? bpmMin : 'Not set';
                                displayedBpmMax.textContent = bpmMax ? bpmMax : 'Not set';
                                displayedEnergyMin.textContent = energyMin ? energyMin : 'Not set';
                                displayedEnergyMax.textContent = energyMax ? energyMax : 'Not set';
                                displayedGenres.textContent = checkedGenres.length > 0 ? checkedGenres.join(', ') : 'Not set';
                            }
                    
                            // Add event listeners for input elements
                            document.getElementById('bpmmin').addEventListener('input', function () {
                                updateLocalStorage('bpmmin');
                                displayPlaylist();
                            });
                            document.getElementById('bpmmax').addEventListener('input', function () {
                                updateLocalStorage('bpmmax');
                                displayPlaylist();
                            });
                            document.getElementById('energymin').addEventListener('input', function () {
                                updateLocalStorage('energymin');
                                displayPlaylist();
                            });
                            document.getElementById('energymax').addEventListener('input', function () {
                                updateLocalStorage('energymax');
                                displayPlaylist();
                            });
                        
                            function updateLocalStorage(key) {
                                // Update localStorage with the current input values
                                localStorage.setItem(key, document.getElementById(key).value);
                            }
                        });
                    </script>
            
                    
                     
                  </div>
                  <div class="field btns">
                     <button class="prev-3 prev">Previous</button>
                     <button class="submit">Submit</button>
                  
                    </div>
                  </div>
               </div>
            </form>
         </div>
      </div>
      <script src="script.js"></script>
   </body>
</html>